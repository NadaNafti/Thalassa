{% extends ":Front:base.html.twig" %}
{% block title %}Réservation{% endblock %}
{% block body %}
    <div id="page_title">
        <div class="container clearfix">
            <div class="page-name">{{ block('title') }}</div>
            <div class="breadcrumb clearfix">
                <a href="{{ path('accueil') }}">Accueil</a>
                <a href="{{ path('front_voyageorganise_accueil') }}">Voyage Organisés</a>
                <a href="{{ path('front_voyageorganise_liste') }}">Liste</a>
                <a href="{{ path('front_voyageorganise_details',{'slug':app.request.get('slug')}) }}">{{ periode.voyage }}</a>
                <span class="current-page">{{ block('title') }}</span>
            </div>
        </div>
    </div>

    <div id="content_wrapper">
        <div class="container">
            <div class="row clearfix pv-50">
                <div class="col-xs-12 col-sm-8 col-md-8 xs-mb">
                    <div class="white-bg payment-wrapper">
                        {% include ':Front:alert.html.twig' %}
                        <div class="person-information" >
                            {{ form_start(form) }}
                            <h3 class="section-title">Hébergement <span class="step active">1</span></h3>
                            <div class="bb2 mb-10"></div>
                            {% for ch in ['single','double','triple','quadruple'] %}
                                <div class="row">
                                    <div class="col-md-3"><h4 style="padding-top: 5px;">Chambre  {{ ch }}</h4></div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <select name='chambre{{ ch }}' class="form-control" id="{{ ch }}">
                                                <option value="">0</option>
                                                {% for i in 1..10 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6"><p style="padding-top: 5px;"> à partir de {{ attribute(pack, ch~'Vente') }} DT</p></div>
                                </div>
                                <div class="occupants"></div>
                                <div class="bb2 mb-10"></div>
                            {% endfor %}
                            <div class="row">
                                <div class="col-md-6"><p style="padding-top: 5px;">Réduction enfant [2..12] ans : {{ pack.enfantVente }} DT</p></div>
                            </div>
                            <div class="mb-20"></div>
                            {% if pack.supplements|length >0 %}
                                <div class="bb2 mb-10"></div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-striped">
                                            <thead>
                                            <th></th>
                                            <th>Prix Adulte</th>
                                            <th>Prix Enfant</th>
                                            </thead>
                                            {% for option in pack.supplements %}
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <div class="styled-checkbox mt-10">
                                                                <label><input type="checkbox" name="supplement{{ option.id }}" {% if option.obligatoire %}disabled checked {% endif %}/>{{ option.libelle }} {% if option.obligatoire %}<small>Obligatoire</small>{% endif %}</label>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="styled-checkbox mt-10">
                                                                {{ option.adulteVente }} DT
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="styled-checkbox mt-10">
                                                                {{ option.enfantVente }} DT
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            {% endfor %}
                                        </table>
                                    </div>
                                </div>
                                <div class="mb-20"></div>
                            {% endif %}
                            {% if periode.circuits|length >0 %}
                                <h3 class="section-title">Circuits & excursions<span class="step active">2</span></h3>
                                <div class="bb2 mb-10"></div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-striped">
                                            <thead>
                                            <th></th>
                                            <th>Prix Adulte</th>
                                            <th>Prix Enfant</th>
                                            </thead>
                                            {% for option in periode.circuits %}
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <div class="styled-checkbox mt-10">
                                                                <label><input type="checkbox" name="circuit{{ option.id }}" {% if option.obligatoire %}disabled checked {% endif %}/>{{ option.libelle }} {% if option.obligatoire %}<small>Obligatoire</small>{% endif %}</label>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="styled-checkbox mt-10">
                                                                {{ option.adulteVente }} DT
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="styled-checkbox mt-10">
                                                                {{ option.enfantVente }} DT
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            {% endfor %}
                                        </table>
                                    </div>
                                </div>
                                <div class="mb-20"></div>
                            {% endif %}
                            {% if periode.frais|length >0 %}
                                <h3 class="section-title">Autres frais divers<span class="step active">3</span></h3>
                                <div class="bb2 mb-10"></div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-striped">
                                            <thead>
                                            <th></th>
                                            <th>Prix Adulte</th>
                                            <th>Prix Enfant</th>
                                            </thead>
                                            {% for option in periode.frais %}
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <div class="styled-checkbox mt-10">
                                                                <label><input type="checkbox" name="circuit{{ option.id }}" {% if option.obligatoire %}disabled checked {% endif %}/>{{ option.libelle }} {% if option.obligatoire %}<small>Obligatoire</small>{% endif %}</label>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="styled-checkbox mt-10">
                                                                {{ option.adulteVente }} DT
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="styled-checkbox mt-10">
                                                                {{ option.enfantVente }} DT
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            {% endfor %}
                                        </table>
                                    </div>
                                </div>
                                <div class="mb-20"></div>
                            {% endif %}
                            <h3 class="section-title">Information Personnelle <span class="step active">4</span></h3>
                            <div class="bb2 mb-10"></div>
                            <h4>Client :</h4>
                            <div style="display: none">
                                {{ formulaire.input("col-md-2","",form.client.responsable,false) }}
                            </div>
                            <div class="row">
                                {{ formulaire.input("col-md-4","Nom & prénom ",form.client.nomPrenom,true) }}
                                {{ formulaire.input("col-md-4","Tel 1",form.client.tel1,true) }}
                                {{ formulaire.input("col-md-4","Tel 2",form.client.tel2,true) }}
                            </div>
                            <div class="row">
                                {{ formulaire.input("col-md-12","Adresse",form.client.adresse,true) }}
                            </div>
                            <div style="display: none">
                                {{ formulaire.input("col-md-4","Matricule Fiscale",form.client.matriculeFiscale,true) }}
                                {{ formulaire.input("col-md-4","Registre Commercie",form.client.registreCommercie,true) }}
                                {{ formulaire.input("col-md-4","Commentaire",form.client.commentaire,true) }}
                            </div>
                            <h3 class="section-title mt-40">Revoir et réserver votre séjour<span class="step active">5</span></h3>
                            <div class="bb2 mb-10"></div>
                            <div class="styled-checkbox mt-10">
                                <label>
                                    <input type="checkbox" name="optionsCheckbox" id="optionsCheckbox1" required value="option1">
                                    En choisissant de compléter cette réservation Je reconnais que je l'ai lu et accepté les  <a href="#" class="clblue">règles & restrictions</a> <a href="#" class="clblue">termes et conditions</a> , and <a href="#" class="clblue">politique de confidentialité</a>.
                                </label>
                            </div>
                            <div class="bb2 mb-10"></div>
                            <div class="row">
                                <div class="col-md-8"></div>
                                <div class="col-md-4">
                                    <button class="btn btn-primary btn-block" type="submit">
                                        Validation <i class="fa fa-arrow-circle-right"></i>
                                    </button>
                                </div>
                            </div>
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" >
                    <div class="sidebar hotel-sidebar">
                        <div class="sidebar-item mb-20">
                            <div class="summary-payment">
                                <div class="summary-header  mb-30">
                                    {% if periode.voyage.photoPrincipal is not null %}
                                        <img src="{{ asset(periode.voyage.photoPrincipal.assetPath) }}" alt="" style="width: 75px;height: 65px" />
                                    {% else %}
                                        <img src="https://placeholdit.imgix.net/~text?txtsize=10&txt=No%20image%20available&w=75&h=65" alt="" style="width: 75px;height: 65px" />
                                    {% endif %}
                                    <h3 class="no-mb">{{ periode.voyage|title }}</h3>
                                    <span>{{ periode.voyage.destination }}</span>
                                </div><div class="bb2 mb-30"></div>
                                <table class="table table-bordered table-striped mb-30">
                                    <tr>
                                        <td colspan=2><span class="text-bold">Période :</span> Du {{ periode.depart|date('d/m/Y') }} au {{ periode.retour|date('d/m/Y') }}</td>
                                    </tr>
                                    <tr>
                                        <td colspan=2><span class="text-bold">Pack :</span> {{ pack }}</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <style>
        label small{
            font-size: 10px;
            color:red;
        }
    </style>
{% endblock %}
{% block jquery %}
    <script>
        $(document).ready(function () {
            $("#single").on('change', function () {
                var nbrChambre = $(this).val();
                var block = $(this).parent().parent().parent().next();
                var exist = block.children().length;
                if (exist < nbrChambre)
                {
                    for (var i = 1; i <= nbrChambre; i++)
                    {
                        if (i > exist)
                            block.append('<div class="row"><div class="col-md-3"><p style="text-align: right;padding-top: 25px;"> Chambre '+i+' </p></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'" required class="form-control"><option value=""></option><option value="adulte">+12</option></select></div></div></div></div>');
                    }
                }
                else
                {
                    var toRemove = (exist - nbrChambre);
                    var nmbr = block.children().length;
                    for (var i = nmbr; i >= (nmbr - toRemove); i--)
                        block.children().eq(i).remove();
                }
            })
            $("#double").on('change', function () {
                var nbrChambre = $(this).val();
                var block = $(this).parent().parent().parent().next();
                var exist = block.children().length;
                if (exist < nbrChambre)
                {
                    for (var i = 1; i <= nbrChambre; i++)
                    {
                        if (i > exist)
                            block.append('<div><div class="row"><div class="col-md-3"><p style="text-align: right;padding-top: 25px;"> Chambre '+i+' </p></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'_1" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'_1" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'_1" required class="form-control"><option value=""></option>{% for i in 2..12 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}<option value="adulte">+12</option></select></div></div></div></div><div class="row"><div class="col-md-3"></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'_2" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'_2" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'_2" required class="form-control"><option value=""></option>{% for i in 2..12 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}<option value="adulte">+12</option></select></div></div></div></div></div>');
                    }
                }
                else
                {
                    var toRemove = (exist - nbrChambre);
                    var nmbr = block.children().length;
                    for (var i = nmbr; i >= (nmbr - toRemove); i--)
                        block.children().eq(i).remove();
                }
            })
            $("#triple").on('change', function () {
                var nbrChambre = $(this).val();
                var block = $(this).parent().parent().parent().next();
                var exist = block.children().length;
                if (exist < nbrChambre)
                {
                    for (var i = 1; i <= nbrChambre; i++)
                    {
                        if (i > exist)
                            block.append('<div><div class="row"><div class="col-md-3"><p style="text-align: right;padding-top: 25px;"> Chambre '+i+' </p></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'_1" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'_1" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'_1" required class="form-control"><option value=""></option>{% for i in 2..12 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}<option value="adulte">+12</option></select></div></div></div></div><div class="row"><div class="col-md-3"></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'_2" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'_2" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'_2" required class="form-control"><option value=""></option>{% for i in 2..12 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}<option value="adulte">+12</option></select></div></div></div></div><div class="row"><div class="col-md-3"></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'_3" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'_3" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'_3" required class="form-control"><option value=""></option>{% for i in 2..12 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}<option value="adulte">+12</option></select></div></div></div></div></div>');
                    }
                }
                else
                {
                    var toRemove = (exist - nbrChambre);
                    var nmbr = block.children().length;
                    for (var i = nmbr; i >= (nmbr - toRemove); i--)
                        block.children().eq(i).remove();
                }
            })
            $("#quadruple").on('change', function () {
                var nbrChambre = $(this).val();
                var block = $(this).parent().parent().parent().next();
                var exist = block.children().length;
                if (exist < nbrChambre)
                {
                    for (var i = 1; i <= nbrChambre; i++)
                    {
                        if (i > exist)
                            block.append('<div><div class="row"><div class="col-md-3"><p style="text-align: right;padding-top: 25px;"> Chambre '+i+' </p></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'_1" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'_1" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'_1" required class="form-control"><option value=""></option>{% for i in 2..12 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}<option value="adulte">+12</option></select></div></div></div></div><div class="row"><div class="col-md-3"></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'_2" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'_2" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'_2" required class="form-control"><option value=""></option>{% for i in 2..12 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}<option value="adulte">+12</option></select></div></div></div></div><div class="row"><div class="col-md-3"></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'_3" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'_3" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'_3" required class="form-control"><option value=""></option>{% for i in 2..12 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}<option value="adulte">+12</option></select></div></div></div></div><div class="row"><div class="col-md-3"></div><div class="col-md-3"><div class="form-group"><label>Nom & Prénom</label><input type="text" name="single_nom_'+i+'_4" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><label>Passport</label><input type="text" name="single_passport_'+i+'_4" required class="form-control" /></div></div><div class="col-md-3"><div class="form-group"><div class="form-group"><label>Age</label><select name="single_age_'+i+'_4" required class="form-control"><option value=""></option>{% for i in 2..12 %}<option value="{{ i }}">{{ i }}</option>{% endfor %}<option value="adulte">+12</option></select></div></div></div></div></div>');
                    }
                }
                else
                {
                    var toRemove = (exist - nbrChambre);
                    var nmbr = block.children().length;
                    for (var i = nmbr; i >= (nmbr - toRemove); i--)
                        block.children().eq(i).remove();
                }
            })
        })
    </script>
{% endblock %}
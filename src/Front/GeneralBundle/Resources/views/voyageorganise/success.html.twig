{% extends ":Front:base.html.twig" %}
{% block body %}
    <div id="content_wrapper">
        <div class="container">
            <div class="row clearfix pv-50">

                <div class="col-xs-12 col-sm-8 col-md-8 xs-mb">
                    <div class="white-bg payment-wrapper">
                        <h2 class="section-title center mb-10"><span class="text-success">Merci</span>, votre réservation est complète!</h2>
                        <p class="center mb-40">Votre numéro de confirmation est <span class="text-success text-bold">{{ reservation.id }}<span></span></p>
                        <h3>Informations réservation</h3>
                        <div class="bb2 mb-30"></div>
                        <table class="table table-striped">
                            <tbody>
                                <tr>
                                    <td>Nom Prénom: </td>
                                    <td>{{ reservation.coordonnees.0 }}</td>
                                </tr>
                                <tr>
                                    <td>Voyage: </td>
                                    <td>{{ reservation.voyage|title }}, {{ reservation.voyage.destination|title }}</td>
                                </tr>
                            </tbody>
                        </table>
                        <hr>
                        {% for chambre in reservation.chambres %}
                            <h2>Chambre  {{ chambre.nomType }}: </h2>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="center">#</th>
                                        <th class="center">Nom</th>
                                        <th class="center">Passport</th>
                                        <th class="center">Age</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for personne in chambre.occupants %}
                                        <tr>
                                            <td class="center">{{ loop.index }}</td>
                                            <td class="center">{{ personne.nomPrenom }}</td>
                                            <td class="center">{{ personne.passport }}</td>
                                            <td class="center">
                                                {% if personne.enfant %}{{ personne.age }} ans{% else %}Adulte{% endif %}
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        {% endfor %}

                        <div class="bb2 mb-15"></div>
                        <div class="mb-15 center">Total : <span class="font24 text-success">{{ reservation.total }} DT</span></div>
                        <div class="bb2 mb-30"></div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4">
                    <div class="sidebar hotel-sidebar">
                        <div class="sidebar-item mb-20">
                            <div class="summary-payment">
                                <div class="summary-header mb-30">
                                    {% if reservation.voyage.photoPrincipal is not null %}
                                        <img src="{{ asset(reservation.voyage.photoPrincipal.assetPath) }}" alt="" style="width: 75px;height: 65px" />
                                    {% else %}
                                        <img src="https://placeholdit.imgix.net/~text?txtsize=15&txt=No%20image%20available&w=75&h=65" alt="" style="width: 75px;height: 65px" />
                                    {% endif %}
                                    <h3 class="no-mb">{{ reservation.voyage|title }}</h3>
                                    <span>{{ reservation.voyage.destination }}</span>
                                </div>
                                <div class="bb2 mb-30"></div>
                                <table class="table table-bordered table-striped mb-30">
                                    <tr>
                                        <td colspan=2><span class="text-bold">Période :</span> Du {{ reservation.pack.periode.depart|date('d/m/Y') }} au {{ reservation.pack.periode.retour|date('d/m/Y') }}</td>
                                    </tr>
                                    <tr>
                                        <td colspan=2><span class="text-bold">Pack :</span> {{ reservation.pack }}</td>
                                    </tr>
                                    {% for chambre in reservation.chambres %}
                                        <tr>
                                            <td>
                                                <span class="text-bold">Chambre  {{ chambre.nomType }}</span>:<br>

                                                {% if reservation.supplements|length >0 %}
                                                    Suppléments
                                                    <button type="button" class="summary-collapse mt-5" data-toggle="collapse" data-target="#collapse1"></button>
                                                    <div id="collapse1" class="collapse" style="height: auto;">
                                                        <div class="left font12 text-info">
                                                            {% for supp in reservation.supplements %}
                                                                - {{ getNameSuppPack(supp) }}<br>
                                                            {% endfor %}
                                                        </div>
                                                        <div class="clearfix"></div>	
                                                    </div>
                                                    <div class="clearfix"></div>	
                                                {% endif %}

                                                {% if reservation.circuits|length >0 %}
                                                    Circuits & excursions
                                                    <button type="button" class="summary-collapse collapsed mt-5" data-toggle="collapse" data-target="#collapse2"></button>
                                                    <div id="collapse2" class="collapse">
                                                        <div class="left font12 text-info">
                                                            {% for supp in reservation.circuits %}
                                                                - {{ getNameSuppPack(supp) }}<br>
                                                            {% endfor %}
                                                        </div>
                                                        <div class="clearfix"></div>	
                                                    </div>
                                                    <div class="clearfix"></div>	
                                                {% endif %}	

                                                {% if reservation.frais|length >0 %}
                                                    Autres frais divers
                                                    <button type="button" class="summary-collapse collapsed mt-5" data-toggle="collapse" data-target="#collapse3"></button>
                                                    <div id="collapse3" class="collapse">
                                                        <div class="left font12 text-info">
                                                            {% for supp in reservation.frais %}
                                                                - {{ getNameSuppPack(supp) }}<br>
                                                            {% endfor %}
                                                        </div>
                                                        <div class="clearfix"></div>	
                                                    </div>
                                                    <div class="clearfix"></div>	
                                                {% endif %}

                                            </td>
                                            <td class="center" style="vertical-align: middle;">
                                                {{ chambre.totalLigneVente }} DT
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    {% if reservation.timbre != 0 %}
                                        <tr>
                                            <td><span class="text-bold">Timbre Fiscale</span></td>
                                            <td>{{ reservation.timbre }} DT</td>
                                        </tr>
                                    {% endif %}
                                </table>
                                <div class="bb2 mb-20"></div>
                                <span class="left">Total:</span>
                                <span class="right text-success text-bold font24">{{ reservation.total }} DT</span>
                                <div class="clear mb-10"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock  %}
